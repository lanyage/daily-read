# 大后端

## 随着互联网用户的剧增，海量的访问已经让服务器不堪重负，怎么解决？
原来一台网络服务器就能解决的，现在需要多台服务器的集群。这样就会出现问题，用户还以为自己是在访问同一台服务器，但是后端如何对用户的请求进行分发呢？那肯定就需要复杂均衡了，如果复杂均衡的策略是粘性会话策略的话，那么还好，因为会根据用户的IP地址来进行HASH，使用户的Session一致存在一台服务器上, 但是如果是在轮播或者最少连接的策略下，或者说用户请求访问的不同机器上的业务的话,那么就需要对session进行一致性操作了，如何操作? 我觉得可行的方法是将用户的session存在redis中，或者在一个全局的配置文件中。

## 网络请求的问题解决了，但是不同业务之间的访问量会有非常大的不同，有的访问量非常的大，有的访问量相对小一些，如果在所有的服务端都存有所有的业务的话,那么会造成巨大的浪费，如何解决？
将业务分区，将不同的业务分到不同的机器或者集群上，但是这样的话，有可能业务会零星的分布在不同的机器或者集群上，那么业务之间的通信如何解决？那么消息队列，RPC（DUBBO），protobuf等东西营运而生。
## 好了，业务解决了，数据库又扛不住了？
二话不说，读写分离，还不行？那就分裤分表，那么就必须使用中间件了。其实像对于数据库扛不住了还可以考虑Command query responsiblity segregation.CQRS,因为现在对于复杂的查询操作非常的不友好，那么就可以将复杂的查询抽象出来，将多表join的数据放到一张大表中，这样一条sql语句就能解决。只需要一个定时程序异步的从写的数据库中读取变化就好了，并且往读的大表或者xml或者json中写入数据。

## 为了进一步的提高性能，缓存吧。
缓存的话可以设置本机缓存(chcache)和分布式缓存(memcached,redis),那么就会有数据分片、数据过多、失效转移等需要考虑。
## 现在用户都喜欢上传大量的图片和文件？
那么我们就需要分布式文件系统，FASTDFS，要达到高可用，高可靠。
## 用户多了，用户的数据量就出来了，搜索的需求就来了？
elastic search，solr等全文索引
## 数据多了，不能白白浪费空间吧？
那么就hadoop来对用户的数据进行分析吧，根据他的一些习惯来给他推荐一些东西。也就是并行计算
## 林子大了，什么安全问题都来了？
数据加密/解密，签名，证书，防止sql注入等
## 项目大了，需要持续集成，韵尾方面也不能落下？
docker，代码环境一起打包。
## 分布式服务器自己买太贵了，那么就搞虚拟服务器吧？
虚拟服务器安装和删除非常方便。

